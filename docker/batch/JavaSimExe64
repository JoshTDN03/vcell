#!/bin/bash

printusage() {
	echo "Usage: JavaSimExe64 simTaskFileName"
	exit 1
}

# main code
if [[ $# -ne 1 ]] ; then 
	printusage
fi

simTaskFileName=$1

#
# make sure no variables are left unset
#
shopt -s -o nounset

javasolver_mainclass=cbit.vcell.message.server.sim.JavaSimulationExecutable

jvmprop="-Djava.io.tmpdir=/tmp"
jvmprop="${jvmprop} -Dvcell.jms.url=${jmsurl}"
jvmprop="${jvmprop} -Dvcell.jms.user=${jmsuser}"
jvmprop="${jvmprop} -Dvcell.jms.pswd=${jmspswd}"
jvmprop="${jvmprop} -Dvcell.primarySimdatadir=/simdata"
jvmprop="${jvmprop} -Dvcell.secondarySimdatadir=/simdata"
jvmprop="${jvmprop} -Dvcell.server.id=${serverid}"
jvmprop="${jvmprop} -Dvcell.softwareVersion=${softwareVersion}"


arguments="/simdata/$simTaskFileName /simdata"

echo "starting java solver"

nice java ${jvmprop} ${javasolver_mainclass} ${arguments}

echo "java solver returned"

exit 0

