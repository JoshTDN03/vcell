FROM openjdk:8

RUN apt-get -y update && \
    apt-get install -y curl openjdk-8-jre dnsutils && \
    mkdir -p /root/Biosimulations_vcell/lib \
    mkdir -p /root/Biosimulations_vcell/installDir \
    mkdir -p /root/Biosimulations_vcell/localsolvers


COPY ./vcell-client/target/vcell-client-0.0.1-SNAPSHOT.jar \
     ./vcell-client/target/maven-jars/*.jar \
 	 ./vcell-core/target/vcell-core-0.0.1-SNAPSHOT.jar \
     ./vcell-core/target/maven-jars/*.jar \
 	 ./vcell-server/target/vcell-server-0.0.1-SNAPSHOT.jar \
     ./vcell-server/target/maven-jars/*.jar \
 	 ./vcell-vmicro/target/vcell-vmicro-0.0.1-SNAPSHOT.jar \
     ./vcell-vmicro/target/maven-jars/*.jar \
 	 ./vcell-oracle/target/vcell-oracle-0.0.1-SNAPSHOT.jar \
     ./vcell-oracle/target/maven-jars/*.jar \
     ./ojdbc6/src/ojdbc6.jar \
     ./ucp/src/ucp.jar \
     ./vcell-admin/target/vcell-admin-0.0.1-SNAPSHOT.jar \
     ./vcell-admin/target/vcell-admin-0.0.1-SNAPSHOT-tests.jar \
     ./vcell-admin/target/maven-jars/*.jar \
     ./vcell-cli/src/libcombine.jar \


COPY . /root/Biosimulations_vcell/lib

ADD ./localsolvers /root/Biosimulations_vcell/installDir/localsolvers

ENTRYPOINT java \
    -Dvcell.installDir=/root/Biosimulations_vcell/installDir \
    cp "/root/Biosimulations_vcell/lib/*" org.vcell.cli.CLIStandalone \