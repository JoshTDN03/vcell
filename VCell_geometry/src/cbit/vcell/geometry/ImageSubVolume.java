package cbit.vcell.geometry;
/*©
 * (C) Copyright University of Connecticut Health Center 2001.
 * All rights reserved.
©*/
import cbit.image.*;
import java.util.*;
import cbit.util.KeyValue;
import cbit.util.Matchable;
import cbit.util.Compare;
/**
 * This class was generated by a SmartGuide.
 * 
 */
public class ImageSubVolume extends SubVolume {
	private VCPixelClass vcPixelClass = null;

/**
 * Geometry constructor comment.
 */
public ImageSubVolume(KeyValue key, VCPixelClass vcPixelClass, int handle) {
	super(key, vcPixelClass.getPixelClassName(), handle);
	this.vcPixelClass = vcPixelClass;
}


/**
 * This method was created in VisualAge.
 * @return boolean
 * @param obj java.lang.Object
 */
public boolean compareEqual(Matchable obj) {
	if (!compareEqual0(obj)){
		return false;
	}
	if (!(obj instanceof ImageSubVolume)){
		return false;
	}
	ImageSubVolume sv = (ImageSubVolume)obj;

	if (!Compare.isEqual(vcPixelClass,sv.vcPixelClass)){
		return false;
	}

	return true;
}


/**
 * This method was created in VisualAge.
 * @return cbit.image.VCImageRegion
 */
public VCPixelClass getPixelClass() {
	if (vcPixelClass==null){
		throw new RuntimeException("pixelClassIsNull");
	}
	return vcPixelClass;
}


/**
 * This method was created in VisualAge.
 * @return int
 */
public int getPixelValue() {
	return vcPixelClass.getPixel();
}


/**
 * This method was created in VisualAge.
 * @return boolean
 * @param x double
 * @param y double
 * @param z double
 */
public boolean isInside(double x,double y, double z, GeometrySpec geometrySpec) throws GeometryException, ImageException {

	if (geometrySpec.getImage()==null){
		throw new GeometryException("vcImage is null");
	}

	//
	// get pixel index
	//
	int index = geometrySpec.getImageIndex(x,y,z);

	//
	// get pixel value
	//
	int pix = 0xff&(int)geometrySpec.getUncompressedPixels()[index];

	//
	// see if pixel value is equal to this pixel
	//
	
	return pix==getPixelValue();
}
}